<!DOCTYPE html>  
<html>
    <head>
        <title>todos.js по-русски</title>
        <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
        <link rel="stylesheet" media="all" href="docco.css" />
    </head>
    <body>
        <div id="container">
            <div id="background"></div>
            <div id="jump_to">
                Jump To &hellip;         
                <div id="jump_wrapper">
                    <div id="jump_page">                                           <a class="source" href="backbone-localstorage.html">                 backbone-localstorage.js               </a>                                           <a class="source" href="todos.html">                 todos.js               </a>                        </div>
                </div>
            </div>
            <table cellpadding="0" cellspacing="0">
                <thead>
                    <tr>
                        <th class="docs">
                            <h1>               todos.js  по-Русски           </h1>
                        </th>
                        <th class="code">           </th>
                    </tr>
                </thead>
                <tbody>
                    <tr id="section-1">
                        <td class="docs">
                            <div class="pilwrap">                 <a class="pilcrow" href="#section-1">&#182;</a>               </div>
                            <p>Пример приложения на Backbone предоставил
                                <a href="http://jgn.me/">Jérôme Gravel-Niquet</a>. Перевод оформил <a href="https://github.com/kulakowka">kulakowka</a>.
                                Этот пример использует
                                <a href="backbone-localstorage.html">LocalStorage адаптер</a>
                                для сохранения Backbone моделей в браузере.
                            </p>
                        </td>
                        <td class="code">
                            <div class="highlight">
                                <pre></pre>
                            </div>
                        </td>
                    </tr>
                    <tr id="section-2">
                        <td class="docs">
                            <div class="pilwrap">                 <a class="pilcrow" href="#section-2">&#182;</a>               </div>
                            <p>Загружаем приложение только после того, как DOM будет готов, используя <code>jQuery.ready</code>:</p>
                        </td>
                        <td class="code">
                            <div class="highlight">
                                <pre><span class="nx">$</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span></pre>
                            </div>
                        </td>
                    </tr>
                    <tr id="section-3">
                        <td class="docs">
                            <div class="pilwrap">                 <a class="pilcrow" href="#section-3">&#182;</a>               </div>
                            <h2>Todo Model</h2>
                        </td>
                        <td class="code">
                            <div class="highlight">
                                <pre></pre>
                            </div>
                        </td>
                    </tr>
                    <tr id="section-4">
                        <td class="docs">
                            <div class="pilwrap">                 <a class="pilcrow" href="#section-4">&#182;</a>               </div>
                            <p>Наша базовая <strong>Todo</strong> модель будет имеет следующие атрибуты: <code>title</code>, <code>order</code>, и <code>done</code>.</p>
                        </td>
                        <td class="code">
                            <div class="highlight">
                                <pre>  <span class="kd">var</span> <span class="nx">Todo</span> <span class="o">=</span> <span class="nx">Backbone</span><span class="p">.</span><span class="nx">Model</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span></pre>
                            </div>
                        </td>
                    </tr>
                    <tr id="section-5">
                        <td class="docs">
                            <div class="pilwrap">                 <a class="pilcrow" href="#section-5">&#182;</a>               </div>
                            <p>Установим атрибуты по умолчанию для данного элемента списка задач.</p>
                        </td>
                        <td class="code">
                            <div class="highlight">
                                <pre>    <span class="nx">defaults</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">return</span> <span class="p">{</span>
        <span class="nx">title</span><span class="o">:</span> <span class="s2">&quot;Новая задача...&quot;</span><span class="p">,</span>
        <span class="nx">order</span><span class="o">:</span> <span class="nx">Todos</span><span class="p">.</span><span class="nx">nextOrder</span><span class="p">(),</span>
        <span class="nx">done</span><span class="o">:</span> <span class="kc">false</span>
      <span class="p">};</span>
    <span class="p">},</span></pre>
                            </div>
                        </td>
                    </tr>
                    <tr id="section-6">
                        <td class="docs">
                            <div class="pilwrap">                 <a class="pilcrow" href="#section-6">&#182;</a>               </div>
                            <p>Убедимся, что каждый созданный элемент списка задач имеет название <code>title</code>.</p>
                        </td>
                        <td class="code">
                            <div class="highlight">
                                <pre>    <span class="nx">initialize</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">&quot;title&quot;</span><span class="p">))</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">set</span><span class="p">({</span><span class="s2">&quot;title&quot;</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">defaults</span><span class="p">.</span><span class="nx">title</span><span class="p">});</span>
      <span class="p">}</span>
    <span class="p">},</span></pre>
                            </div>
                        </td>
                    </tr>
                    <tr id="section-7">
                        <td class="docs">
                            <div class="pilwrap">                 <a class="pilcrow" href="#section-7">&#182;</a>               </div>
                            <p>Этот метод переключает состояние <code>done</code> текущего элемента списка задач.</p>
                        </td>
                        <td class="code">
                            <div class="highlight">
                                <pre>    <span class="nx">toggle</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">save</span><span class="p">({</span><span class="nx">done</span><span class="o">:</span> <span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">&quot;done&quot;</span><span class="p">)});</span>
    <span class="p">},</span></pre>
                            </div>
                        </td>
                    </tr>
                    <tr id="section-8">
                        <td class="docs">
                            <div class="pilwrap">                 <a class="pilcrow" href="#section-8">&#182;</a>               </div>
                            <p>Этот метод удаляет данные Todo из localStorage и удаляет его представления.</p>
                        </td>
                        <td class="code">
                            <div class="highlight">
                                <pre>    <span class="nx">clear</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">destroy</span><span class="p">();</span>
    <span class="p">}</span>

  <span class="p">});</span></pre>
                            </div>
                        </td>
                    </tr>
                    <tr id="section-9">
                        <td class="docs">
                            <div class="pilwrap">                 <a class="pilcrow" href="#section-9">&#182;</a>               </div>
                            <h2>Todo Collection</h2>
                        </td>
                        <td class="code">
                            <div class="highlight">
                                <pre></pre>
                            </div>
                        </td>
                    </tr>
                    <tr id="section-10">
                        <td class="docs">
                            <div class="pilwrap">                 <a class="pilcrow" href="#section-10">&#182;</a>               </div>
                            <p>Коллекция списка задач поддерживается с помощью локального хранилища  (<em>localStorage</em>), а не на удаленном сервере.
                            </p>
                        </td>
                        <td class="code">
                            <div class="highlight">
                                <pre>  <span class="kd">var</span> <span class="nx">TodoList</span> <span class="o">=</span> <span class="nx">Backbone</span><span class="p">.</span><span class="nx">Collection</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span></pre>
                            </div>
                        </td>
                    </tr>
                    <tr id="section-11">
                        <td class="docs">
                            <div class="pilwrap">                 <a class="pilcrow" href="#section-11">&#182;</a>               </div>
                            <p>Ссылка на модель для этой коллекции.</p>
                        </td>
                        <td class="code">
                            <div class="highlight">
                                <pre>    <span class="nx">model</span><span class="o">:</span> <span class="nx">Todo</span><span class="p">,</span></pre>
                            </div>
                        </td>
                    </tr>
                    <tr id="section-12">
                        <td class="docs">
                            <div class="pilwrap">                 <a class="pilcrow" href="#section-12">&#182;</a>               </div>
                            <p>Сохраняем все элементы списка задач с неймспейсом "todos-backbone".</p>
                        </td>
                        <td class="code">
                            <div class="highlight">
                                <pre>    <span class="nx">localStorage</span><span class="o">:</span> <span class="k">new</span> <span class="nx">Store</span><span class="p">(</span><span class="s2">&quot;todos-backbone&quot;</span><span class="p">),</span></pre>
                            </div>
                        </td>
                    </tr>
                    <tr id="section-13">
                        <td class="docs">
                            <div class="pilwrap">                 <a class="pilcrow" href="#section-13">&#182;</a>               </div>
                            <p>Фильтр по списку задач, которые были завершены.</p>
                        </td>
                        <td class="code">
                            <div class="highlight">
                                <pre>    <span class="nx">done</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">todo</span><span class="p">){</span> <span class="k">return</span> <span class="nx">todo</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;done&#39;</span><span class="p">);</span> <span class="p">});</span>
    <span class="p">},</span></pre>
                            </div>
                        </td>
                    </tr>
                    <tr id="section-14">
                        <td class="docs">
                            <div class="pilwrap">                 <a class="pilcrow" href="#section-14">&#182;</a>               </div>
                            <p>Фильтр по списку задач, которые до сих пор не закончены.</p>
                        </td>
                        <td class="code">
                            <div class="highlight">
                                <pre>    <span class="nx">remaining</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">without</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">done</span><span class="p">());</span>
    <span class="p">},</span></pre>
                            </div>
                        </td>
                    </tr>
                    <tr id="section-15">
                        <td class="docs">
                            <div class="pilwrap">                 <a class="pilcrow" href="#section-15">&#182;</a>               </div>
                            <p>Мы храним задачи в последовательном порядке, несмотря на то, что сохраняем неупорядоченный GUID в базе данных. 
                            Этот метод создает следующий номер для новых элементов списка задач.
                            </p>
                        </td>
                        <td class="code">
                            <div class="highlight">
                                <pre>    <span class="nx">nextOrder</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">last</span><span class="p">().</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;order&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
    <span class="p">},</span></pre>
                            </div>
                        </td>
                    </tr>
                    <tr id="section-16">
                        <td class="docs">
                            <div class="pilwrap">                 <a class="pilcrow" href="#section-16">&#182;</a>               </div>
                            <p>Задачи сортируются по их первоначальному порядку добавления.</p>
                        </td>
                        <td class="code">
                            <div class="highlight">
                                <pre>    <span class="nx">comparator</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">todo</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">todo</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;order&#39;</span><span class="p">);</span>
    <span class="p">}</span>

  <span class="p">});</span></pre>
                            </div>
                        </td>
                    </tr>
                    <tr id="section-17">
                        <td class="docs">
                            <div class="pilwrap">                 <a class="pilcrow" href="#section-17">&#182;</a>               </div>
                            <p>Создадим нашу глобальную коллекцию <strong>Todos</strong>.</p>
                        </td>
                        <td class="code">
                            <div class="highlight">
                                <pre>  <span class="kd">var</span> <span class="nx">Todos</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">TodoList</span><span class="p">;</span></pre>
                            </div>
                        </td>
                    </tr>
                    <tr id="section-18">
                        <td class="docs">
                            <div class="pilwrap">                 <a class="pilcrow" href="#section-18">&#182;</a>               </div>
                            <h2>Todo Item View </h2>
                        </td>
                        <td class="code">
                            <div class="highlight">
                                <pre></pre>
                            </div>
                        </td>
                    </tr>
                    <tr id="section-19">
                        <td class="docs">
                            <div class="pilwrap">                 <a class="pilcrow" href="#section-19">&#182;</a>               </div>
                            <p>Элемент DOM для элемента в списке задач (Todo Item)…</p>
                        </td>
                        <td class="code">
                            <div class="highlight">
                                <pre>  <span class="kd">var</span> <span class="nx">TodoView</span> <span class="o">=</span> <span class="nx">Backbone</span><span class="p">.</span><span class="nx">View</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span></pre>
                            </div>
                        </td>
                    </tr>
                    <tr id="section-20">
                        <td class="docs">
                            <div class="pilwrap">                 <a class="pilcrow" href="#section-20">&#182;</a>               </div>
                            <p>... будет li, тег списка.</p>
                        </td>
                        <td class="code">
                            <div class="highlight">
                                <pre>    <span class="nx">tagName</span><span class="o">:</span>  <span class="s2">&quot;li&quot;</span><span class="p">,</span></pre>
                            </div>
                        </td>
                    </tr>
                    <tr id="section-21">
                        <td class="docs">
                            <div class="pilwrap">                 <a class="pilcrow" href="#section-21">&#182;</a>               </div>
                            <p>Кэшируем функцию шаблона для одного элемента.</p>
                        </td>
                        <td class="code">
                            <div class="highlight">
                                <pre>    <span class="nx">template</span><span class="o">:</span> <span class="nx">_</span><span class="p">.</span><span class="nx">template</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#item-template&#39;</span><span class="p">).</span><span class="nx">html</span><span class="p">()),</span></pre>
                            </div>
                        </td>
                    </tr>
                    <tr id="section-22">
                        <td class="docs">
                            <div class="pilwrap">                 <a class="pilcrow" href="#section-22">&#182;</a>               </div>
                            <p>DOM события, характерные для элемента.</p>
                        </td>
                        <td class="code">
                            <div class="highlight">
                                <pre>    <span class="nx">events</span><span class="o">:</span> <span class="p">{</span>
      <span class="s2">&quot;click .toggle&quot;</span>   <span class="o">:</span> <span class="s2">&quot;toggleDone&quot;</span><span class="p">,</span>
      <span class="s2">&quot;dblclick .view&quot;</span>  <span class="o">:</span> <span class="s2">&quot;edit&quot;</span><span class="p">,</span>
      <span class="s2">&quot;click a.destroy&quot;</span> <span class="o">:</span> <span class="s2">&quot;clear&quot;</span><span class="p">,</span>
      <span class="s2">&quot;keypress .edit&quot;</span>  <span class="o">:</span> <span class="s2">&quot;updateOnEnter&quot;</span><span class="p">,</span>
      <span class="s2">&quot;blur .edit&quot;</span>      <span class="o">:</span> <span class="s2">&quot;close&quot;</span>
    <span class="p">},</span></pre>
                            </div>
                        </td>
                    </tr>
                    <tr id="section-23">
                        <td class="docs">
                            <div class="pilwrap">                 <a class="pilcrow" href="#section-23">&#182;</a>               </div>
                            <p>TodoView ожидает изменения в модели, для повторного рендеринга.
                            Так что есть связь один-к-одному между моделью <strong>Todo</strong> и представлением <strong>TodoView</strong>. 
                            В этом приложении мы установили прямые ссылки на модели для удобства.
                            </p>
                        </td>
                        <td class="code">
                            <div class="highlight">
                                <pre>    <span class="nx">initialize</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">model</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="s1">&#39;change&#39;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">render</span><span class="p">,</span> <span class="k">this</span><span class="p">);</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">model</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="s1">&#39;destroy&#39;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">remove</span><span class="p">,</span> <span class="k">this</span><span class="p">);</span>
    <span class="p">},</span></pre>
                            </div>
                        </td>
                    </tr>
                    <tr id="section-24">
                        <td class="docs">
                            <div class="pilwrap">                 <a class="pilcrow" href="#section-24">&#182;</a>               </div>
                            <p>Рендеринг элемента (задачи) в списке задач.</p>
                        </td>
                        <td class="code">
                            <div class="highlight">
                                <pre>    <span class="nx">render</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">$el</span><span class="p">.</span><span class="nx">html</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">template</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">model</span><span class="p">.</span><span class="nx">toJSON</span><span class="p">()));</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">$el</span><span class="p">.</span><span class="nx">toggleClass</span><span class="p">(</span><span class="s1">&#39;done&#39;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">model</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;done&#39;</span><span class="p">));</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">input</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">$</span><span class="p">(</span><span class="s1">&#39;.edit&#39;</span><span class="p">);</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
    <span class="p">},</span></pre>
                            </div>
                        </td>
                    </tr>
                    <tr id="section-25">
                        <td class="docs">
                            <div class="pilwrap">                 <a class="pilcrow" href="#section-25">&#182;</a>               </div>
                            <p>Переключает состояние <code>"done"</code> в модели.</p>
                        </td>
                        <td class="code">
                            <div class="highlight">
                                <pre>    <span class="nx">toggleDone</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">model</span><span class="p">.</span><span class="nx">toggle</span><span class="p">();</span>
    <span class="p">},</span></pre>
                            </div>
                        </td>
                    </tr>
                    <tr id="section-26">
                        <td class="docs">
                            <div class="pilwrap">                 <a class="pilcrow" href="#section-26">&#182;</a>               </div>
                            <p>Переключает представление в режим редактирования <code>"editing"</code>, отображает поле для ввода текста.</p>
                        </td>
                        <td class="code">
                            <div class="highlight">
                                <pre>    <span class="nx">edit</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">$el</span><span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="s2">&quot;editing&quot;</span><span class="p">);</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">input</span><span class="p">.</span><span class="nx">focus</span><span class="p">();</span>
    <span class="p">},</span></pre>
                            </div>
                        </td>
                    </tr>
                    <tr id="section-27">
                        <td class="docs">
                            <div class="pilwrap">                 <a class="pilcrow" href="#section-27">&#182;</a>               </div>
                            <p>Закрывает режим редактирования <code>"editing"</code>, сохраняя изменения в todo.</p>
                        </td>
                        <td class="code">
                            <div class="highlight">
                                <pre>    <span class="nx">close</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">value</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">input</span><span class="p">.</span><span class="nx">val</span><span class="p">();</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">value</span><span class="p">)</span> <span class="k">this</span><span class="p">.</span><span class="nx">clear</span><span class="p">();</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">model</span><span class="p">.</span><span class="nx">save</span><span class="p">({</span><span class="nx">title</span><span class="o">:</span> <span class="nx">value</span><span class="p">});</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">$el</span><span class="p">.</span><span class="nx">removeClass</span><span class="p">(</span><span class="s2">&quot;editing&quot;</span><span class="p">);</span>
    <span class="p">},</span></pre>
                            </div>
                        </td>
                    </tr>
                    <tr id="section-28">
                        <td class="docs">
                            <div class="pilwrap">                 <a class="pilcrow" href="#section-28">&#182;</a>               </div>
                            <p>Закрывает режим редактирования элемента по нажатию <code>enter</code>.</p>
                        </td>
                        <td class="code">
                            <div class="highlight">
                                <pre>    <span class="nx">updateOnEnter</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">keyCode</span> <span class="o">==</span> <span class="mi">13</span><span class="p">)</span> <span class="k">this</span><span class="p">.</span><span class="nx">close</span><span class="p">();</span>
    <span class="p">},</span></pre>
                            </div>
                        </td>
                    </tr>
                    <tr id="section-29">
                        <td class="docs">
                            <div class="pilwrap">                 <a class="pilcrow" href="#section-29">&#182;</a>               </div>
                            <p>Этот метод удаляет элемент в списке задач и удаляет его модель.</p>
                        </td>
                        <td class="code">
                            <div class="highlight">
                                <pre>    <span class="nx">clear</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">model</span><span class="p">.</span><span class="nx">clear</span><span class="p">();</span>
    <span class="p">}</span>

  <span class="p">});</span></pre>
                            </div>
                        </td>
                    </tr>
                    <tr id="section-30">
                        <td class="docs">
                            <div class="pilwrap">                 <a class="pilcrow" href="#section-30">&#182;</a>               </div>
                            <h2>The Application</h2>
                        </td>
                        <td class="code">
                            <div class="highlight">
                                <pre></pre>
                            </div>
                        </td>
                    </tr>
                    <tr id="section-31">
                        <td class="docs">
                            <div class="pilwrap">                 <a class="pilcrow" href="#section-31">&#182;</a>               </div>
                            <p>Наше главное представление <strong>AppView</strong> является частью верхнего уровня пользовательского интерфейса.</p>
                        </td>
                        <td class="code">
                            <div class="highlight">
                                <pre>  <span class="kd">var</span> <span class="nx">AppView</span> <span class="o">=</span> <span class="nx">Backbone</span><span class="p">.</span><span class="nx">View</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span></pre>
                            </div>
                        </td>
                    </tr>
                    <tr id="section-32">
                        <td class="docs">
                            <div class="pilwrap">                 <a class="pilcrow" href="#section-32">&#182;</a>               </div>
                            <p>Вместо создания нового элемента, связываем с присутствующим в HTML элементом.
                            </p>
                        </td>
                        <td class="code">
                            <div class="highlight">
                                <pre>    <span class="nx">el</span><span class="o">:</span> <span class="nx">$</span><span class="p">(</span><span class="s2">&quot;#todoapp&quot;</span><span class="p">),</span></pre>
                            </div>
                        </td>
                    </tr>
                    <tr id="section-33">
                        <td class="docs">
                            <div class="pilwrap">                 <a class="pilcrow" href="#section-33">&#182;</a>               </div>
                            <p>Наш шаблон для строки статистики в нижней части приложения.</p>
                        </td>
                        <td class="code">
                            <div class="highlight">
                                <pre>    <span class="nx">statsTemplate</span><span class="o">:</span> <span class="nx">_</span><span class="p">.</span><span class="nx">template</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#stats-template&#39;</span><span class="p">).</span><span class="nx">html</span><span class="p">()),</span></pre>
                            </div>
                        </td>
                    </tr>
                    <tr id="section-34">
                        <td class="docs">
                            <div class="pilwrap">                 <a class="pilcrow" href="#section-34">&#182;</a>               </div>
                            <p>Делегированных событий для создания новых элементов, а также очистки завершенных.</p>
                        </td>
                        <td class="code">
                            <div class="highlight">
                                <pre>    <span class="nx">events</span><span class="o">:</span> <span class="p">{</span>
      <span class="s2">&quot;keypress #new-todo&quot;</span><span class="o">:</span>  <span class="s2">&quot;createOnEnter&quot;</span><span class="p">,</span>
      <span class="s2">&quot;click #clear-completed&quot;</span><span class="o">:</span> <span class="s2">&quot;clearCompleted&quot;</span><span class="p">,</span>
      <span class="s2">&quot;click #toggle-all&quot;</span><span class="o">:</span> <span class="s2">&quot;toggleAllComplete&quot;</span>
    <span class="p">},</span></pre>
                            </div>
                        </td>
                    </tr>
                    <tr id="section-35">
                        <td class="docs">
                            <div class="pilwrap">                 <a class="pilcrow" href="#section-35">&#182;</a>               </div>
                            <p>При инициализации мы навешиваем соответствующие события на коллекцию <code>Todos</code>, 
                            	на добавление или изменение элемента списка задач.
                            	Получаем существующие задачи, которые могут быть сохранены в <em>localStorage</em>.
                            </p>
                        </td>
                        <td class="code">
                            <div class="highlight">
                                <pre>    <span class="nx">initialize</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>

      <span class="k">this</span><span class="p">.</span><span class="nx">input</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">$</span><span class="p">(</span><span class="s2">&quot;#new-todo&quot;</span><span class="p">);</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">allCheckbox</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">$</span><span class="p">(</span><span class="s2">&quot;#toggle-all&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">];</span>

      <span class="nx">Todos</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="s1">&#39;add&#39;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">addOne</span><span class="p">,</span> <span class="k">this</span><span class="p">);</span>
      <span class="nx">Todos</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="s1">&#39;reset&#39;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">addAll</span><span class="p">,</span> <span class="k">this</span><span class="p">);</span>
      <span class="nx">Todos</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="s1">&#39;all&#39;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">render</span><span class="p">,</span> <span class="k">this</span><span class="p">);</span>

      <span class="k">this</span><span class="p">.</span><span class="nx">footer</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">$</span><span class="p">(</span><span class="s1">&#39;footer&#39;</span><span class="p">);</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">main</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#main&#39;</span><span class="p">);</span>

      <span class="nx">Todos</span><span class="p">.</span><span class="nx">fetch</span><span class="p">();</span>
    <span class="p">},</span></pre>
                            </div>
                        </td>
                    </tr>
                    <tr id="section-36">
                        <td class="docs">
                            <div class="pilwrap">                 <a class="pilcrow" href="#section-36">&#182;</a>               </div>
                            <p>Рендеринг приложения просто обновляет статистику &mdash; остальное в приложении не изменится.
                            </p>
                        </td>
                        <td class="code">
                            <div class="highlight">
                                <pre>    <span class="nx">render</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">done</span> <span class="o">=</span> <span class="nx">Todos</span><span class="p">.</span><span class="nx">done</span><span class="p">().</span><span class="nx">length</span><span class="p">;</span>
      <span class="kd">var</span> <span class="nx">remaining</span> <span class="o">=</span> <span class="nx">Todos</span><span class="p">.</span><span class="nx">remaining</span><span class="p">().</span><span class="nx">length</span><span class="p">;</span>

      <span class="k">if</span> <span class="p">(</span><span class="nx">Todos</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">main</span><span class="p">.</span><span class="nx">show</span><span class="p">();</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">footer</span><span class="p">.</span><span class="nx">show</span><span class="p">();</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">footer</span><span class="p">.</span><span class="nx">html</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">statsTemplate</span><span class="p">({</span><span class="nx">done</span><span class="o">:</span> <span class="nx">done</span><span class="p">,</span> <span class="nx">remaining</span><span class="o">:</span> <span class="nx">remaining</span><span class="p">}));</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">main</span><span class="p">.</span><span class="nx">hide</span><span class="p">();</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">footer</span><span class="p">.</span><span class="nx">hide</span><span class="p">();</span>
      <span class="p">}</span>

      <span class="k">this</span><span class="p">.</span><span class="nx">allCheckbox</span><span class="p">.</span><span class="nx">checked</span> <span class="o">=</span> <span class="o">!</span><span class="nx">remaining</span><span class="p">;</span>
    <span class="p">},</span></pre>
                            </div>
                        </td>
                    </tr>
                    <tr id="section-37">
                        <td class="docs">
                            <div class="pilwrap">                 <a class="pilcrow" href="#section-37">&#182;</a>               </div>
                            <p>Добавляем один элемент в список задач, создав представление для него, и добавим его в элемент <code>&lt;ul&gt;</code>.
                            </p>
                        </td>
                        <td class="code">
                            <div class="highlight">
                                <pre>    <span class="nx">addOne</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">todo</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">view</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">TodoView</span><span class="p">({</span><span class="nx">model</span><span class="o">:</span> <span class="nx">todo</span><span class="p">});</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">$</span><span class="p">(</span><span class="s2">&quot;#todo-list&quot;</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="nx">view</span><span class="p">.</span><span class="nx">render</span><span class="p">().</span><span class="nx">el</span><span class="p">);</span>
    <span class="p">},</span></pre>
                            </div>
                        </td>
                    </tr>
                    <tr id="section-38">
                        <td class="docs">
                            <div class="pilwrap">                 <a class="pilcrow" href="#section-38">&#182;</a>               </div>
                            <p>
                            Добавить все элементы коллекции <strong>Todos</strong> сразу.</p>
                        </td>
                        <td class="code">
                            <div class="highlight">
                                <pre>    <span class="nx">addAll</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">Todos</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">addOne</span><span class="p">);</span>
    <span class="p">},</span></pre>
                            </div>
                        </td>
                    </tr>
                    <tr id="section-39">
                        <td class="docs">
                            <div class="pilwrap">                 <a class="pilcrow" href="#section-39">&#182;</a>               </div>
                            <p>Если вы нажмете клавишу "Enter" в основном поле ввода, создастся новая модель <strong>Todo</strong>, 
                            и сохранится в <em>localStorage</em>.
                            </p>
                        </td>
                        <td class="code">
                            <div class="highlight">
                                <pre>    <span class="nx">createOnEnter</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">keyCode</span> <span class="o">!=</span> <span class="mi">13</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">input</span><span class="p">.</span><span class="nx">val</span><span class="p">())</span> <span class="k">return</span><span class="p">;</span>

      <span class="nx">Todos</span><span class="p">.</span><span class="nx">create</span><span class="p">({</span><span class="nx">title</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">input</span><span class="p">.</span><span class="nx">val</span><span class="p">()});</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">input</span><span class="p">.</span><span class="nx">val</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">);</span>
    <span class="p">},</span></pre>
                            </div>
                        </td>
                    </tr>
                    <tr id="section-40">
                        <td class="docs">
                            <div class="pilwrap">                 <a class="pilcrow" href="#section-40">&#182;</a>               </div>
                            <p>Очистить все завершенные элементы списка задач, уничтожая их модели.</p>
                        </td>
                        <td class="code">
                            <div class="highlight">
                                <pre>    <span class="nx">clearCompleted</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">_</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">Todos</span><span class="p">.</span><span class="nx">done</span><span class="p">(),</span> <span class="kd">function</span><span class="p">(</span><span class="nx">todo</span><span class="p">){</span> <span class="nx">todo</span><span class="p">.</span><span class="nx">clear</span><span class="p">();</span> <span class="p">});</span>
      <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
    <span class="p">},</span>

    <span class="nx">toggleAllComplete</span><span class="o">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">done</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">allCheckbox</span><span class="p">.</span><span class="nx">checked</span><span class="p">;</span>
      <span class="nx">Todos</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">todo</span><span class="p">)</span> <span class="p">{</span> <span class="nx">todo</span><span class="p">.</span><span class="nx">save</span><span class="p">({</span><span class="s1">&#39;done&#39;</span><span class="o">:</span> <span class="nx">done</span><span class="p">});</span> <span class="p">});</span>
    <span class="p">}</span>

  <span class="p">});</span></pre>
                            </div>
                        </td>
                    </tr>
                    <tr id="section-41">
                        <td class="docs">
                            <div class="pilwrap">                 <a class="pilcrow" href="#section-41">&#182;</a>               </div>
                            <p>Наконец, мы можем запустить приложение <strong>App</strong>.</p>
                        </td>
                        <td class="code">
                            <div class="highlight">
                                <pre>  <span class="kd">var</span> <span class="nx">App</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">AppView</span><span class="p">;</span>

<span class="p">});</span>

</pre>
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </body>
</html>